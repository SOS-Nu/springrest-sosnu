# ==========================================
# COMMON CONFIGURATION (Core)
# ==========================================
spring.application.name=jobhunter

# Mặc định chạy profile DEV (Local). Khi lên Prod sẽ override bằng biến môi trường.
spring.profiles.active=dev

# ==========================================
# FILE UPLOAD (Size Limits)
# ==========================================
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB

# ==========================================
# WEB & PAGINATION
# ==========================================
spring.data.web.pageable.one-indexed-parameters=true
server.forward-headers-strategy=framework

# ==========================================
# KAFKA (Common Serializer/Deserializer logic)
# ==========================================
spring.kafka.client-id=jobhunter

# Producer
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.producer.properties.spring.json.add.type.headers=false

# Consumer
spring.kafka.consumer.group-id=jobhunter-mail
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.key-deserializer=org.springframework.kafka.support.serializer.ErrorHandlingDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.ErrorHandlingDeserializer
spring.kafka.consumer.properties.spring.deserializer.key.delegate.class=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.properties.spring.deserializer.value.delegate.class=org.springframework.kafka.support.serializer.JsonDeserializer
spring.kafka.consumer.properties.spring.json.trusted.packages=vn.hoidanit.jobhunter.*
spring.kafka.consumer.properties.spring.json.value.default.type=vn.hoidanit.jobhunter.kafka.MailCommand

# Topics
app.kafka.topics.mail=mail-commands
app.kafka.topics.mail-dlt=mail-commands.DLT

# Logging Kafka
logging.level.vn.hoidanit.jobhunter.kafka=INFO

# CRON JOBS & SCHEDULES
# VIP Duration (30 ngày)
hoidanit.vip.duration-minutes=43200
hoidanit.vip.check-cron=0 0 0 * * ?
hoidanit.endDateJob.check-cron=0 0 0 * * ?

# VNPAY (Version & Command)
vnpay.version=2.1.0
vnpay.command=pay

# ACTUATOR & PROMETHEUS
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.probes.enabled=true
management.metrics.tags.application=${spring.application.name}
management.metrics.distribution.percentiles-histogram.http.server.requests=true

# RATE LIMITING
app.rate-limit.enabled=true
app.rate-limit.requests-per-second=10
app.rate-limit.burst-capacity=10
app.rate-limit.apply-path=/api/**
app.rate-limit.whitelist=/actuator/**,/swagger-ui/**,/v3/api-docs/**,/ws/**,/storage/**